<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>Chapter 5. Universal Quantification (Forall)</title>

<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
body {
  overflow: visible;
  padding: 8px;
}
div#notebook {
  overflow: visible;
  border-top: none;
}@media print {
  div.cell {
    display: block;
    page-break-inside: avoid;
  } 
  div.output_wrapper { 
    display: block;
    page-break-inside: avoid; 
  }
  div.output { 
    display: block;
    page-break-inside: avoid; 
  }
}
</style>

<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="notebook.css">

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
</script></head>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">
    <a href="../index.html"><img src="../pv_it.png" alt="logo" style="width:50px;float:left;position:absolute"></a> 

<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Chapter-5.-Universal-Quantification-(Forall)">Chapter 5. Universal Quantification (Forall)<a class="anchor-link" href="#Chapter-5.-Universal-Quantification-(Forall)">&#182;</a></h1><p>Universal quantification is another core concept in <strong>Prove-It</strong>.  A <code>Forall</code> operation, formatted with the $\forall$ symbol, is used to represent universal quantification.  For example, $\forall_x P(x)$ means that $P(x)$ is true for any instance of $x$.  $P(x)$ holds true universally over instances of $x$.  Like <code>Implies</code>, <code>Forall</code> is a core concept but is defined outside of the core in the <code>proveit.logic</code> package. It is known in the core for use in the <em>specialization</em> and <em>generalization</em> derivation steps discussed below.</p>
<p>First, let us import some necessary information then consider an example of a <code>Forall</code> object like $\forall_{x \,\in\, S \,|\, Q(x), R(x)} P(x)$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">Function</span><span class="p">,</span> <span class="n">ExprList</span><span class="p">,</span> <span class="n">Lambda</span>
<span class="kn">from</span> <span class="nn">proveit.logic</span> <span class="k">import</span> <span class="n">Forall</span>
<span class="kn">from</span> <span class="nn">proveit.number</span> <span class="k">import</span> <span class="n">Less</span><span class="p">,</span> <span class="n">Add</span>
<span class="kn">from</span> <span class="nn">proveit._common_</span> <span class="k">import</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">Px</span><span class="p">,</span> <span class="n">Pxy</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">Qx</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">Rx</span><span class="p">,</span> <span class="n">Ry</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">T</span>
<span class="o">%</span><span class="k">begin</span> universal_quantification
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Px</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Qx</span><span class="p">,</span> <span class="n">Rx</span><span class="p">],</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[2]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="basicForallExpr">basicForallExpr:</strong> <a class="ProveItLink" href="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.html"><img src="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The meaning of this <code>Forall</code> <strong>Expression</strong> is that $P(x)$ is a true statement for all instances of $x$ for which $x \in S$ and both $Q(x)$ and $R(x)$ are true.</p>
<p>We can use the <code>exprInfo()</code> method to examine the internal structure of the expression:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">exprInfo</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>core type</th><th>sub-expressions</th><th>expression</th></tr>
<tr><td>0</td><td>Operation</td><td>operator:&nbsp;1<br>operand:&nbsp;2<br></td><td><a class="ProveItLink" href="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.html"><img src="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>1</td><td>Literal</td><td></td><td><a class="ProveItLink" href="../packages/proveit/logic/boolean/quantification/universal/__pv_it/265f8c02ac1094d56e0e6410a1c1fd3500dc9f540/expr.html"><img src="../packages/proveit/logic/boolean/quantification/universal/__pv_it/265f8c02ac1094d56e0e6410a1c1fd3500dc9f540/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>2</td><td>Lambda</td><td>parameter:&nbsp;13<br>body:&nbsp;3<br>conditions:&nbsp;4<br></td><td><a class="ProveItLink" href="__pv_it/c783c3d0ddceffe458a468f833f77851b5e5488e0/expr.html"><img src="__pv_it/c783c3d0ddceffe458a468f833f77851b5e5488e0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>3</td><td>Operation</td><td>operator:&nbsp;5<br>operand:&nbsp;13<br></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/8c735c381b4cbf3c87e86ca2468da4e5c976f9b00/expr.html"><img src="../packages/proveit/__pv_it/8c735c381b4cbf3c87e86ca2468da4e5c976f9b00/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>4</td><td>ExprList</td><td>6, 7, 8</td><td><a class="ProveItLink" href="__pv_it/25b4fb40e880d04b05e4f76c95553f0c0b3b76b20/expr.html"><img src="__pv_it/25b4fb40e880d04b05e4f76c95553f0c0b3b76b20/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>5</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.html"><img src="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>6</td><td>Operation</td><td>operator:&nbsp;9<br>operands:&nbsp;10<br></td><td><a class="ProveItLink" href="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.html"><img src="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>7</td><td>Operation</td><td>operator:&nbsp;11<br>operand:&nbsp;13<br></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/050bcffbb388a0b365dac8afc3d37833b4bb47300/expr.html"><img src="../packages/proveit/__pv_it/050bcffbb388a0b365dac8afc3d37833b4bb47300/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>8</td><td>Operation</td><td>operator:&nbsp;12<br>operand:&nbsp;13<br></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/d01cfc83d8b4aad8e81bd51bd1f9adb62576a1e70/expr.html"><img src="../packages/proveit/__pv_it/d01cfc83d8b4aad8e81bd51bd1f9adb62576a1e70/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>9</td><td>Literal</td><td></td><td><a class="ProveItLink" href="../packages/proveit/logic/set_theory/membership/__pv_it/088cbc857536a28d4119ad9639a84270ccb0545d0/expr.html"><img src="../packages/proveit/logic/set_theory/membership/__pv_it/088cbc857536a28d4119ad9639a84270ccb0545d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>10</td><td>ExprList</td><td>13, 14</td><td><a class="ProveItLink" href="__pv_it/36fdea86647c815a13bd2d80d0c25d06692bc3ac0/expr.html"><img src="__pv_it/36fdea86647c815a13bd2d80d0c25d06692bc3ac0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>11</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/98124f92e6e1fc3772af50ac63eaa1f5624776f20/expr.html"><img src="../packages/proveit/__pv_it/98124f92e6e1fc3772af50ac63eaa1f5624776f20/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>12</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/e24df48bc297bbcf3538a62f5b4f635a392abfce0/expr.html"><img src="../packages/proveit/__pv_it/e24df48bc297bbcf3538a62f5b4f635a392abfce0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>13</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>14</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.html"><img src="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
</table>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>Forall</code> derives from <code>OperationOverInstances</code> (<code>proveit._core_.expression.operation.operation_over_instances.OperationOverInstances</code> aliased as <code>proveit.OperationOverInstances</code>) which generally defines an operation that acts on a <strong>lambda</strong> map with optional conditions.  The idea is like a "functional" (a function of a function).  It operates over the range of instances for the <strong>lambda</strong> parameters for which the condition is satisfied.  Other examples of <strong>expression</strong> types that derive from <code>OperationOverInstances</code> are $\exists$, $\sum$, and $\prod$.</p>
<p>In our example above, we see that the domain $S$ is internally represented via the first condition of the conditional <strong>lambda</strong> (see Line 2 of the <code>exprInfo()</code> output).  In the external representation, it is displayed more compactly along with the introduction of $x$ before the vertical line that precedes the other conditions.  This is a matter of presentation style that is independent of how <strong>Prove-It</strong> treats this expression.  As far as <strong>Prove-It</strong> is concerned, $x \in S$ is simply a condition no different from $Q(x)$ and $R(x)$.</p>
<p>We can view a formatted version of the original object like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.html"><img src="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can use Python's <code>dir()</code> function to get a list of our <code>Forall</code> object's attributes and methods:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">basicForallExpr</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;__class__&#39;,
 &#39;__delattr__&#39;,
 &#39;__dict__&#39;,
 &#39;__dir__&#39;,
 &#39;__doc__&#39;,
 &#39;__eq__&#39;,
 &#39;__format__&#39;,
 &#39;__ge__&#39;,
 &#39;__getattribute__&#39;,
 &#39;__gt__&#39;,
 &#39;__hash__&#39;,
 &#39;__init__&#39;,
 &#39;__init_subclass__&#39;,
 &#39;__le__&#39;,
 &#39;__lt__&#39;,
 &#39;__module__&#39;,
 &#39;__ne__&#39;,
 &#39;__new__&#39;,
 &#39;__reduce__&#39;,
 &#39;__reduce_ex__&#39;,
 &#39;__repr__&#39;,
 &#39;__setattr__&#39;,
 &#39;__sizeof__&#39;,
 &#39;__str__&#39;,
 &#39;__subclasshook__&#39;,
 &#39;__weakref__&#39;,
 &#39;_allConditions&#39;,
 &#39;_allDomains&#39;,
 &#39;_allInstanceVars&#39;,
 &#39;_checkRelabelMap&#39;,
 &#39;_class_path&#39;,
 &#39;_clear_&#39;,
 &#39;_config_latex_tool&#39;,
 &#39;_coreInfo&#39;,
 &#39;_createOperand&#39;,
 &#39;_expandingIterRanges&#39;,
 &#39;_extractCoreInfo&#39;,
 &#39;_extractExprClass&#39;,
 &#39;_extractInitArgs&#39;,
 &#39;_extractMyInitArgs&#39;,
 &#39;_extractReferencedObjIds&#39;,
 &#39;_extractStyle&#39;,
 &#39;_formatMultiOperator&#39;,
 &#39;_formatted&#39;,
 &#39;_generate_unique_rep&#39;,
 &#39;_genericExpr&#39;,
 &#39;_implicitOperator&#39;,
 &#39;_init_argname_mapping_&#39;,
 &#39;_make&#39;,
 &#39;_meaningData&#39;,
 &#39;_meaning_id&#39;,
 &#39;_operator_&#39;,
 &#39;_repr_html_&#39;,
 &#39;_requirements&#39;,
 &#39;_restrictionChecked&#39;,
 &#39;_setContext&#39;,
 &#39;_specializeUnravelingTheorem&#39;,
 &#39;_styleData&#39;,
 &#39;_style_id&#39;,
 &#39;_subExpressions&#39;,
 &#39;_validateRelabelMap&#39;,
 &#39;_withMatchingStyle&#39;,
 &#39;allConditions&#39;,
 &#39;allDomains&#39;,
 &#39;allInstanceVars&#39;,
 &#39;conclude&#39;,
 &#39;concludeAsFolded&#39;,
 &#39;concludeNegation&#39;,
 &#39;concludeViaImplication&#39;,
 &#39;conditions&#39;,
 &#39;contexts&#39;,
 &#39;copy&#39;,
 &#39;coreInfo&#39;,
 &#39;deduceInBool&#39;,
 &#39;deriveBundled&#39;,
 &#39;deriveUnraveled&#39;,
 &#39;deriveUnraveledEquiv&#39;,
 &#39;displayed_expression_styles&#39;,
 &#39;disprove&#39;,
 &#39;domain&#39;,
 &#39;evaluation&#39;,
 &#39;explicitConditions&#39;,
 &#39;explicitDomains&#39;,
 &#39;explicitInstanceExpr&#39;,
 &#39;explicitInstanceVars&#39;,
 &#39;exprInfo&#39;,
 &#39;extractInitArgValue&#39;,
 &#39;extractMyInitArgValue&#39;,
 &#39;formatted&#39;,
 &#39;freeMultiVars&#39;,
 &#39;freeVars&#39;,
 &#39;getRequirements&#39;,
 &#39;getStyle&#39;,
 &#39;getStyles&#39;,
 &#39;hasDomain&#39;,
 &#39;in_progress_to_conclude&#39;,
 &#39;inclusiveConditions&#39;,
 &#39;innerExpr&#39;,
 &#39;instanceExpr&#39;,
 &#39;instanceVar&#39;,
 &#39;instanceVarLists&#39;,
 &#39;joinedNestings&#39;,
 &#39;latex&#39;,
 &#39;numSubExpr&#39;,
 &#39;operand&#39;,
 &#39;operand_or_operands&#39;,
 &#39;operands&#39;,
 &#39;operationClassOfOperator&#39;,
 &#39;operator&#39;,
 &#39;operator_or_operators&#39;,
 &#39;operators&#39;,
 &#39;orderOfAppearance&#39;,
 &#39;prove&#39;,
 &#39;relabeled&#39;,
 &#39;remakeArguments&#39;,
 &#39;remakeConstructor&#39;,
 &#39;remakeWithStyleCalls&#39;,
 &#39;safeDummyVar&#39;,
 &#39;safeDummyVars&#39;,
 &#39;sideEffects&#39;,
 &#39;simplification&#39;,
 &#39;specialize&#39;,
 &#39;string&#39;,
 &#39;styleNames&#39;,
 &#39;styleOptions&#39;,
 &#39;subExpr&#39;,
 &#39;subExprIter&#39;,
 &#39;substituted&#39;,
 &#39;unfold&#39;,
 &#39;unraveled&#39;,
 &#39;usedVars&#39;,
 &#39;withJustification&#39;,
 &#39;withMatchingStyle&#39;,
 &#39;withStyles&#39;,
 &#39;withWrapAfterOperator&#39;,
 &#39;withWrapBeforeOperator&#39;,
 &#39;withWrappingAt&#39;,
 &#39;wrapPositions&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>and the general Python-provided object attribute <code>__dict__</code> (using two underscores on each end) to view all the attribute names and values for our specific <code>Forall</code> object:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="vm">__dict__</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>{&#39;operator_or_operators&#39;: forall,
 &#39;operand_or_operands&#39;: x -&gt; P(x) | x in S , Q(x) , R(x),
 &#39;operator&#39;: forall,
 &#39;operators&#39;: (forall),
 &#39;operand&#39;: x -&gt; P(x) | x in S , Q(x) , R(x),
 &#39;operands&#39;: (x -&gt; P(x) | x in S , Q(x) , R(x)),
 &#39;_subExpressions&#39;: (forall, x -&gt; P(x) | x in S , Q(x) , R(x)),
 &#39;_genericExpr&#39;: forall_{_x_ in S | Q(_x_) , R(_x_)} P(_x_),
 &#39;_meaningData&#39;: &lt;proveit._core_._unique_data._MeaningData at 0x7fabdddd3e10&gt;,
 &#39;_styleData&#39;: &lt;proveit._core_._unique_data._StyleData at 0x7fabdddd00f0&gt;,
 &#39;_meaning_id&#39;: -8473702159008248208,
 &#39;_coreInfo&#39;: (&#39;Operation&#39;,),
 &#39;_requirements&#39;: (),
 &#39;_style_id&#39;: -379049770974725789,
 &#39;instanceExpr&#39;: P(x),
 &#39;instanceVar&#39;: x,
 &#39;domain&#39;: S,
 &#39;conditions&#39;: (x in S , Q(x) , R(x))}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Some of the various parts of the <code>Forall</code> <strong>expression</strong> may be accessed as follows:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">instanceVar</span>        <span class="c1"># Variable whose value defines the instance.</span>
                                   <span class="c1"># This attribute returns just the first instance variable</span>
                                   <span class="c1"># if there is more than one.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[7]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">allInstanceVars</span><span class="p">()</span>  <span class="c1"># The list of all variables whose values define the instance</span>
                                   <span class="c1"># (may be one or more variables).</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[8]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[x]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">instanceExpr</span>       <span class="c1"># The expression being quantified over.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="../packages/proveit/__pv_it/8c735c381b4cbf3c87e86ca2468da4e5c976f9b00/expr.html"><img src="../packages/proveit/__pv_it/8c735c381b4cbf3c87e86ca2468da4e5c976f9b00/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">conditions</span>         <span class="c1"># The list of conditions of the universal quantification.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="__pv_it/25b4fb40e880d04b05e4f76c95553f0c0b3b76b20/expr.html"><img src="__pv_it/25b4fb40e880d04b05e4f76c95553f0c0b3b76b20/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">domain</span>             <span class="c1"># Domain of the instance variable.</span>
                                   <span class="c1"># If there are multiple instance variables each with its own domain,</span>
                                   <span class="c1"># this attribute returns just the domain for the 1st variable.</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.html"><img src="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">allDomains</span><span class="p">()</span>       <span class="c1"># The set of all domains for all instance variables</span>
                                   <span class="c1"># (might be 0, 1, or more in the list)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[S]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span><span class="o">.</span><span class="n">explicitConditions</span><span class="p">()</span>  <span class="c1"># Returns the list of conditions that appear after the</span>
                                      <span class="c1"># vertical line in the notation (i.e., exluding the domain condition(s)).</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[Q(x), R(x)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="A-More-Complex-Forall-Example">A More Complex Forall Example<a class="anchor-link" href="#A-More-Complex-Forall-Example">&#182;</a></h3><p>We can construct more complex <code>Forall</code> <strong>expression</strong>s involving multiple instance-defining variables, each from the same domain, like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">secondForallExpr</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">Pxy</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Qx</span><span class="p">,</span> <span class="n">Ry</span><span class="p">],</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">S</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="secondForallExpr">secondForallExpr:</strong> <a class="ProveItLink" href="__pv_it/f739a2211d2a2370c3726b2fe61c9ada810001e20/expr.html"><img src="__pv_it/f739a2211d2a2370c3726b2fe61c9ada810001e20/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>or specify individual domains for the instance variables:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="n">Pxy</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Qx</span><span class="p">,</span> <span class="n">Ry</span><span class="p">],</span> <span class="n">domains</span> <span class="o">=</span> <span class="p">[</span><span class="n">S</span><span class="p">,</span> <span class="n">T</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="thirdForallExpr">thirdForallExpr:</strong> <a class="ProveItLink" href="__pv_it/5a14c3bffc9749634ce5e4c1973c2ce1d9fdaa0b0/expr.html"><img src="__pv_it/5a14c3bffc9749634ce5e4c1973c2ce1d9fdaa0b0/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The various parts of such <code>Forall</code> <strong>expression</strong>s may be accessed as before, with a few special circumstances:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">instanceVar</span>              <span class="c1"># Obtain the first of the instance-defining variables</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[16]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">allInstanceVars</span><span class="p">()</span>        <span class="c1"># Obtain a list of ALL instance-defining variables</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[x, y]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">allInstanceVars</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>    <span class="c1"># Obtain the LAST of all instance-defining variables</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">instanceExpr</span>             <span class="c1"># Obtain the first nested expression being quantified over</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[19]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="__pv_it/df7bc7d03aaf940157ccba2f359a519c7615ecfa0/expr.html"><img src="__pv_it/df7bc7d03aaf940157ccba2f359a519c7615ecfa0/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">explicitInstanceExpr</span><span class="p">()</span>   <span class="c1"># Obtain the explicit final expression being quantified over</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[20]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.html"><img src="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">domain</span>                   <span class="c1"># Obtain the domain if just a single domain, or the domain of</span>
                                         <span class="c1"># the 1st instance-defining variable if multiple domains</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[21]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.html"><img src="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">allDomains</span><span class="p">()</span>             <span class="c1"># Obtain a list of all domains</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[22]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[S, T]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">conditions</span>               <span class="c1"># Obtain conditions for first instance-defining variable</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[x in S, Q(x)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">allConditions</span><span class="p">()</span>          <span class="c1"># Obtain conditions for all instance-defining variables</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[24]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[x in S, Q(x), y in T, R(y)]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">thirdForallExpr</span><span class="o">.</span><span class="n">instanceExpr</span><span class="o">.</span><span class="n">conditions</span>  <span class="c1"># Obtain conditions for 2nd (or 1st-nested) instance-defining variable</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[25]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="__pv_it/062c72fd43df713bf2189856757ce994719390340/expr.html"><img src="__pv_it/062c72fd43df713bf2189856757ce994719390340/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Specialization-(or-Universal-Instantiation)">Specialization (or Universal Instantiation)<a class="anchor-link" href="#Specialization-(or-Universal-Instantiation)">&#182;</a></h1><p>The <em>specialization</em> derivation (or universal instantiation) step uses <em>expression substitution</em> internally.  The difference is that <em>specialization</em> has proof implications and enforces the extra restrictions to justify these proof implications.  It also eliminates one or more of the outer $\forall$ operations.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Basic-Specialization">Basic Specialization<a class="anchor-link" href="#Basic-Specialization">&#182;</a></h3><p>Let us take our basic/generic example of the <code>Forall</code> expression above and specialize it with a particular "instance" expression.  To do so, we will make assumptions to trivially allow this derivation step to be taken (just to show how this works).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">Function</span><span class="p">,</span> <span class="n">ExprList</span>
<span class="kn">from</span> <span class="nn">proveit._common_</span> <span class="k">import</span> <span class="n">fy</span>
<span class="kn">from</span> <span class="nn">proveit.logic</span> <span class="k">import</span> <span class="n">InSet</span>
<span class="n">assumptions</span> <span class="o">=</span> <span class="n">ExprList</span><span class="p">(</span><span class="n">basicForallExpr</span><span class="p">,</span> <span class="n">InSet</span><span class="p">(</span><span class="n">fy</span><span class="p">,</span> <span class="n">S</span><span class="p">),</span> <span class="n">Function</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">fy</span><span class="p">),</span> <span class="n">Function</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">fy</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[26]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="assumptions">assumptions:</strong> <a class="ProveItLink" href="__pv_it/2d694bde19f975ef229ae6675712fa738d8f57670/expr.html"><img src="__pv_it/2d694bde19f975ef229ae6675712fa738d8f57670/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>InSet()</code> is another core concept that is defined outside of the core in <code>proveit.logic</code>.  It represents the set membership operation using the $\in$ symbol.  It is needed as a core concept specifically for the purpose of ensuring that universal quantification requirements are met (the "instance" expression must be "in" the domain set).</p>
<p>To implement the specialization or universal instantiation where the instance variable $x$ is replaced with the specific instance or value $f(y)$, we have:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallSpec</span> <span class="o">=</span> <span class="n">basicForallExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">)</span>
<span class="n">basicForallSpec</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[27]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/526dde690b463cf3c56abb3913076e117d60dabf0/expr.html"><img src="__pv_it/526dde690b463cf3c56abb3913076e117d60dabf0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/e16eba53b0be132ecdb115b19c32e9f6e91766930/expr.html"><img src="__pv_it/e16eba53b0be132ecdb115b19c32e9f6e91766930/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We have proven, somewhat trivially, that $P(f(y))$ is true assuming that $\forall_{x \in S~|~Q(x)} P(x)$, $f(y) \in S$, $Q(f(y))$ are all true statements.</p>
<p>Let us take a look at the proof for this statement:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallSpec</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[28]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1, 2, 3, 4</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/526dde690b463cf3c56abb3913076e117d60dabf0/expr.html"><img src="__pv_it/526dde690b463cf3c56abb3913076e117d60dabf0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/e16eba53b0be132ecdb115b19c32e9f6e91766930/expr.html"><img src="__pv_it/e16eba53b0be132ecdb115b19c32e9f6e91766930/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/e4f99fbf53c5e24e1c1e622903a7736f418f26ef0/expr.html"><img src="../packages/proveit/__pv_it/e4f99fbf53c5e24e1c1e622903a7736f418f26ef0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/12753cd3c714840b6ba0f971efe02ce4088257570/expr.html"><img src="__pv_it/12753cd3c714840b6ba0f971efe02ce4088257570/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.html"><img src="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>2</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/268f310cadeea8c32912ea7c8328fa40b11fa53c0/expr.html"><img src="__pv_it/268f310cadeea8c32912ea7c8328fa40b11fa53c0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/ec2c2fa1ecba6bd2da2def76efbae1904f43053d0/expr.html"><img src="__pv_it/ec2c2fa1ecba6bd2da2def76efbae1904f43053d0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>3</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/fac784b6f51600f981c380d5f3e3cd5cbb4e2b5f0/expr.html"><img src="__pv_it/fac784b6f51600f981c380d5f3e3cd5cbb4e2b5f0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/a42dcb2a1478b3b87b8f129e549a557692557fd00/expr.html"><img src="__pv_it/a42dcb2a1478b3b87b8f129e549a557692557fd00/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>4</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/58a41dc1621297c1cdfcccc8ead95654fb69a7df0/expr.html"><img src="__pv_it/58a41dc1621297c1cdfcccc8ead95654fb69a7df0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/7aa454bcc8446e5a1c8515a46db6a919038056c50/expr.html"><img src="__pv_it/7aa454bcc8446e5a1c8515a46db6a919038056c50/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This indicates that the proof requires a <em>specialization</em> step (step 0) and explicitly indicates, in the row under step 0, the mapping being performed (mapping $x$ to $f(y)$).  The subsequent proof steps that are required are simply proofs by assumption.  Specifically, the original <code>Forall</code> expression must be true and the conditions must be satisfied for the instance $x \mapsto f(y)$: $f(y) \in S$, $Q(f(x))$, and $R(f(y))$.  If any of these are not known to be true under the provided assumptions, this step will fail.  In this example, they are trivially true because our assumptions were chosen to be precisely what needed to be true for the <em>specialization</em> step to succeed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we leave out our first assumption (<em>i.e.</em>, the original <code>Forall</code> object itself), <strong>Prove-It</strong> is unable to prove the original <code>Forall</code> expression even after attempting to perform automation and the <em>specialization</em> step will fail.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">ProofFailure</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">basicForallExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an ProofFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">ProofFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Unable to prove forall_{x in S | Q(x) , R(x)} P(x) assuming {f(y) in S, Q(f(y)), R(f(y))}: Unable to conclude automatically; the domain has no &#39;foldAsForall&#39; method and automated generalization failed.
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The automation checks to see if the $S$ <strong>Expression</strong> has a <code>foldAsForall</code> method that would automate a proof for universal quantification over $S$.  Since $S$ is a simple <strong>Variable</strong> object, no such automation exists.</p>
<p>Next we'll see what happens when the instantiated "instance" $f(y)$ is not known to be in the domain $S$ (<em>i.e.</em>, we omit the assumption that $f(y) \in S$):</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">SpecializationFailure</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">basicForallExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">assumptions</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an SpecializationFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">SpecializationFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Unable to prove P(f(y)) assuming {forall_{x in S | Q(x) , R(x)} P(x), Q(f(y)), R(f(y))}: Unmet specialization requirement: f(y) in S
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we demonstrate the case when one of the "explicit" conditions is not met -- first omitting the assumption that $Q(f(y))$ is TRUE:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">basicForallExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="n">assumptions</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an SpecializationFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">SpecializationFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Unable to prove P(f(y)) assuming {forall_{x in S | Q(x) , R(x)} P(x), f(y) in S, R(f(y))}: Unmet specialization requirement: Q(f(y))
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>then omitting the assumption that $R(f(y))$ is TRUE:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">basicForallExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting a SpecializationFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">SpecializationFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Unable to prove P(f(y)) assuming {forall_{x in S | Q(x) , R(x)} P(x), f(y) in S, Q(f(y))}: Unmet specialization requirement: R(f(y))
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Also note that you cannot <em>specialize</em> a variable that is not one of the <code>Forall</code> instance variables. For example, we cannot specialize the propositional function variable $Q$. Recall our basic expression first:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">basicForallExpr</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[33]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.html"><img src="__pv_it/768e0ea8953379b26e536b52c663304c5502b1240/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then try to <em>specialize</em> our <code>Forall</code> object by instantiating $Q$ with $R$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">basicForallExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">,</span> <span class="n">Q</span><span class="p">:</span><span class="n">R</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">)</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting a SpecializationFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">SpecializationFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Proof step failed assuming {forall_{x in S | Q(x) , R(x)} P(x), f(y) in S, Q(f(y)), R(f(y)), forall_{x in S | Q(x) , R(x)} P(x)}: May only specialize instance variables of directly nested Forall operations
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can, of course, <em>relabel</em> <strong>Variable</strong>s that are not <code>Forall</code> instance variables.  Later in this tutorial we will show that you can <em>relabel</em> and <em>specialize</em> simultaneously (see the sub-section on <strong><em>Specializing and Relabeling Simultaneously</em></strong>).  You can also <em>specialize</em> multiple levels of <code>Forall</code> operations simultaneously which is why the previous error message mentions "nested Forall operations".</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Universal-quantification-without-a-domain">Universal quantification without a domain<a class="anchor-link" href="#Universal-quantification-without-a-domain">&#182;</a></h3><p>It is not necessary to specify a domain in a <code>Forall</code> <strong>Expression</strong>.  For example, the condition(s) may provide sufficient restrictions for the universal quantification.  Also, any number of conditions may be specified (including no conditions).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">noDomainForallExpr</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Px</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Qx</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[35]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="noDomainForallExpr">noDomainForallExpr:</strong> <a class="ProveItLink" href="__pv_it/a2ebf99e8e39eb09c8e8634a38eff06a38fbda4c0/expr.html"><img src="__pv_it/a2ebf99e8e39eb09c8e8634a38eff06a38fbda4c0/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can verify the absence of an explicit domain in a variety of ways:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">noDomainForallExpr</span><span class="o">.</span><span class="n">hasDomain</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[36]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>False</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">noDomainForallExpr</span><span class="o">.</span><span class="n">domain</span> <span class="ow">is</span> <span class="kc">None</span>  <span class="c1"># The Forall object&#39;s domain is None</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can use the <code>exprInfo()</code> method to examine the internal structure of the expression:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">noDomainForallExpr</span><span class="o">.</span><span class="n">exprInfo</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[38]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>core type</th><th>sub-expressions</th><th>expression</th></tr>
<tr><td>0</td><td>Operation</td><td>operator:&nbsp;1<br>operand:&nbsp;2<br></td><td><a class="ProveItLink" href="__pv_it/a2ebf99e8e39eb09c8e8634a38eff06a38fbda4c0/expr.html"><img src="__pv_it/a2ebf99e8e39eb09c8e8634a38eff06a38fbda4c0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>1</td><td>Literal</td><td></td><td><a class="ProveItLink" href="../packages/proveit/logic/boolean/quantification/universal/__pv_it/265f8c02ac1094d56e0e6410a1c1fd3500dc9f540/expr.html"><img src="../packages/proveit/logic/boolean/quantification/universal/__pv_it/265f8c02ac1094d56e0e6410a1c1fd3500dc9f540/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>2</td><td>Lambda</td><td>parameter:&nbsp;8<br>body:&nbsp;3<br>conditions:&nbsp;4<br></td><td><a class="ProveItLink" href="__pv_it/b8a7d976e666ff37f706887e3ed1646edb7975140/expr.html"><img src="__pv_it/b8a7d976e666ff37f706887e3ed1646edb7975140/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>3</td><td>Operation</td><td>operator:&nbsp;5<br>operand:&nbsp;8<br></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/8c735c381b4cbf3c87e86ca2468da4e5c976f9b00/expr.html"><img src="../packages/proveit/__pv_it/8c735c381b4cbf3c87e86ca2468da4e5c976f9b00/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>4</td><td>ExprList</td><td>6</td><td><a class="ProveItLink" href="__pv_it/a422a8eec4da2178db83f3d719e826b5246a80ac0/expr.html"><img src="__pv_it/a422a8eec4da2178db83f3d719e826b5246a80ac0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>5</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.html"><img src="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>6</td><td>Operation</td><td>operator:&nbsp;7<br>operand:&nbsp;8<br></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/050bcffbb388a0b365dac8afc3d37833b4bb47300/expr.html"><img src="../packages/proveit/__pv_it/050bcffbb388a0b365dac8afc3d37833b4bb47300/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>7</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/98124f92e6e1fc3772af50ac63eaa1f5624776f20/expr.html"><img src="../packages/proveit/__pv_it/98124f92e6e1fc3772af50ac63eaa1f5624776f20/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>8</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
</table>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As before, we can implement a specialization or univeral instantiation, where the variable $x$ is replaced with the specific instance $f(y)$. To do so, we include the original <code>Forall</code> expression as an assumption, along with the assumption that $Q(f(y))$ is TRUE:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">noDomainForallExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">noDomainForallExpr</span><span class="p">,</span> <span class="n">Function</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">fy</span><span class="p">)])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[39]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/9a66db7b6809c51a3500072de1f3869c3d3ac6220/expr.html"><img src="__pv_it/9a66db7b6809c51a3500072de1f3869c3d3ac6220/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/e16eba53b0be132ecdb115b19c32e9f6e91766930/expr.html"><img src="__pv_it/e16eba53b0be132ecdb115b19c32e9f6e91766930/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Lambda-scope-restrictions">Lambda scope restrictions<a class="anchor-link" href="#Lambda-scope-restrictions">&#182;</a></h3><p>In <code>tutorial01_core_expr</code>, we noted scoping restrictions that apply to <strong>Lambda</strong> expressions in the context of <em>expression substitution</em>.  That restriction carries over to <em>specialization</em> and is very important.  Consider the following example.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit.logic</span> <span class="k">import</span> <span class="n">NotEquals</span><span class="p">,</span> <span class="n">Exists</span>
<span class="kn">from</span> <span class="nn">proveit._common_</span> <span class="k">import</span> <span class="n">Pxy</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">fy</span>
<span class="n">forallExistsExpr</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Exists</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">NotEquals</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[40]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="forallExistsExpr">forallExistsExpr:</strong> <a class="ProveItLink" href="__pv_it/5385a41e4d26dd6b26883c027350694807c8c9aa0/expr.html"><img src="__pv_it/5385a41e4d26dd6b26883c027350694807c8c9aa0/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that, while <code>Forall</code> ($\forall$) has a special meaning in the <strong>Prove-It</strong> core, <code>Exists</code> ($\exists$) and <code>Equals</code> ($\neq$) do not (they are defined via <strong>axioms</strong> within the <code>proveit.logic</code> package, which we will explain in a later chapter).  We are using them here to make our point more clear.  Just note that <code>Exists</code> is another kind of <code>OperationOverInstances</code> that operates on a <strong>lambda</strong> function:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Exists</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Pxy</span><span class="p">)</span><span class="o">.</span><span class="n">exprInfo</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[41]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>core type</th><th>sub-expressions</th><th>expression</th></tr>
<tr><td>0</td><td>Operation</td><td>operator:&nbsp;1<br>operand:&nbsp;2<br></td><td><a class="ProveItLink" href="__pv_it/c91bd187d105e662a2ac9785afe36fc99798fddf0/expr.html"><img src="__pv_it/c91bd187d105e662a2ac9785afe36fc99798fddf0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>1</td><td>Literal</td><td></td><td><a class="ProveItLink" href="../packages/proveit/logic/boolean/quantification/existential/__pv_it/da19b8f23feda7f65e2e1ac67a7814d51a597b7d0/expr.html"><img src="../packages/proveit/logic/boolean/quantification/existential/__pv_it/da19b8f23feda7f65e2e1ac67a7814d51a597b7d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>2</td><td>Lambda</td><td>parameter:&nbsp;7<br>body:&nbsp;3<br></td><td><a class="ProveItLink" href="__pv_it/99678345bb5656bb610f512dd78c93f69740ec410/expr.html"><img src="__pv_it/99678345bb5656bb610f512dd78c93f69740ec410/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>3</td><td>Operation</td><td>operator:&nbsp;4<br>operands:&nbsp;5<br></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.html"><img src="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>4</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.html"><img src="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>5</td><td>ExprList</td><td>6, 7</td><td><a class="ProveItLink" href="__pv_it/49ffa46c24d385ebbd0014895cf61cc7cb8bd9bb0/expr.html"><img src="__pv_it/49ffa46c24d385ebbd0014895cf61cc7cb8bd9bb0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>6</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>7</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
</table>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we try to specialize $x$ as $y$ in <code>nestedForall</code>, this will fail:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">ScopingViolation</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">forallExistsExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">y</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">{</span><span class="n">forallExistsExpr</span><span class="p">})</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an ScopingViolation error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">ScopingViolation</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Must not make substitution with reserved variables  (i.e., parameters of a Lambda function)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And of course this <em>should</em> fail.  We cannot derive $\exists_y y \neq y$ by assuming $\forall_{ x } \left[\exists_y x \neq y \right]$.  The former is a stronger statement.  We chose this example, in fact, because the latter can be argued as typically true but the former is never true using reasonable definitions.  Where this goes wrong is in violating the scope of $\exists_y$.  It is introducing $y$ as a new <strong>variable</strong> within the sub-expression $\exists_y x \neq y$.  This <strong>label</strong> is off limits to $x$ which is quantified outside of this sub-expression.  We can <em>specialize</em> $x$ to whatever we want as long as we respect these scoping restrictions.</p>
<p>In fact, it is not simply $y$ that is off limits; all <strong>expressions</strong> involving $y$ are off limits. Assuming $\forall_{ x } \left[\exists_y x \neq y \right]$ should not allow us to derive $\exists_y f(y) \neq y$, and the attempted specialization does indeed fail:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">ScopingViolation</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">forallExistsExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">{</span><span class="n">forallExistsExpr</span><span class="p">})</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an ScopingViolation error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">ScopingViolation</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Must not make substitution with reserved variables  (i.e., parameters of a Lambda function)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It should also be noted that within a scope, a <strong>variable</strong> may be reused with a different meaning.  This should generally be avoided as it makes <strong>expressions</strong> unclear, but the functionality should be well-defined in case it ever happens.  If this happens, we treat it as a distinct <strong>variable</strong> from anything outside of the scope (that just happens to have the same name).  It can be confusing and should be avoided, but it is well-defined.  For example, consider the following nested <code>Forall</code> expression:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[44]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit.logic</span> <span class="k">import</span> <span class="n">And</span>
<span class="n">redundantInstanceVarExpr</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">And</span><span class="p">(</span><span class="n">Px</span><span class="p">,</span> <span class="n">Forall</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Qx</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[44]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="redundantInstanceVarExpr">redundantInstanceVarExpr:</strong> <a class="ProveItLink" href="__pv_it/5a94d88ea85e1efd767b80cc81315847ebcfb1d50/expr.html"><img src="__pv_it/5a94d88ea85e1efd767b80cc81315847ebcfb1d50/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Specializing the outer $x$ does not and should not change the inner $x$, which is treated as a distinct <strong>variable</strong>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[45]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">redundantInstanceVarExpr</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">fy</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">{</span><span class="n">redundantInstanceVarExpr</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[45]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/16e810f7f86c7c6190927b4fdf7d7cdbd02b8e260/expr.html"><img src="__pv_it/16e810f7f86c7c6190927b4fdf7d7cdbd02b8e260/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/26d51d99df9f26dc929d10a047c477e374bd9a870/expr.html"><img src="__pv_it/26d51d99df9f26dc929d10a047c477e374bd9a870/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">redundantInstanceVarExpr</span><span class="o">.</span><span class="n">relabeled</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">y</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[46]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="__pv_it/7cca246885c411c4e95b9060a5dfba933dd3b6670/expr.html"><img src="__pv_it/7cca246885c411c4e95b9060a5dfba933dd3b6670/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>At this time, there is no straightforward way to specialize the inner $x$ itself (another reason to avoid such potentially confusing constructions).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Operand,-operator,-or-operation-specialization">Operand, operator, or operation specialization<a class="anchor-link" href="#Operand,-operator,-or-operation-specialization">&#182;</a></h3><p><em>Specializing</em> different parts of an <strong>operation</strong> works essentially the same way as it does with <em>expression substition</em>.</p>
<p>We will use the <code>substitution</code> axiom of <code>proveit.logic.equality</code> for demonstrations in this section out of convenience.  <strong>Axioms</strong> and the <code>proveit.logic</code> package will be discussed in more detail later.  For now, we note that <strong>axioms</strong> (and <strong>theorems</strong>) are taken to be true statements without proof, as you can see below.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[47]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit.logic.equality._axioms_</span> <span class="k">import</span> <span class="n">substitution</span>
<span class="n">substitution</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[47]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[48]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">substitution</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[48]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>axiom</td><td></td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style-"text-align:left"><a class="ProveItLink" href="../packages/proveit/logic/equality/_axioms_.html#substitution">proveit.logic.equality.substitution</a></td></tr></table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's grab the $x=y$ condition for use below.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x_eq_y</span> <span class="o">=</span> <span class="n">substitution</span><span class="o">.</span><span class="n">allConditions</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[49]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="x_eq_y">x_eq_y:</strong> <a class="ProveItLink" href="__pv_it/74ae967be5bd1c096ad29ed9e31ac59a533f07b30/expr.html"><img src="__pv_it/74ae967be5bd1c096ad29ed9e31ac59a533f07b30/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Operator and operand <em>specialization</em> are straightforward:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[50]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit._common_</span> <span class="k">import</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span>
<span class="n">operatorSubstitution</span> <span class="o">=</span> <span class="n">substitution</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">f</span><span class="p">:</span><span class="n">g</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[50]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="operatorSubstitution">operatorSubstitution:</strong> <span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/4e77880421ab00090db64434c64e718abd28fb6e0/expr.html"><img src="__pv_it/4e77880421ab00090db64434c64e718abd28fb6e0/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operatorSubstitution</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[51]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1</td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/4e77880421ab00090db64434c64e718abd28fb6e0/expr.html"><img src="__pv_it/4e77880421ab00090db64434c64e718abd28fb6e0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/4d51ee1e62d011d06d4528b97697bf3da60c9de60/expr.html"><img src="../packages/proveit/__pv_it/4d51ee1e62d011d06d4528b97697bf3da60c9de60/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/b5004dd09038f1a7d88dab9010b943185ce1d3ea0/expr.html"><img src="../packages/proveit/__pv_it/b5004dd09038f1a7d88dab9010b943185ce1d3ea0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>axiom</td><td></td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style-"text-align:left"><a class="ProveItLink" href="../packages/proveit/logic/equality/_axioms_.html#substitution">proveit.logic.equality.substitution</a></td></tr></table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that $x$ and $y$ mapped to themselves by default.  When a mapping is not specified, the default is to map the <strong>variable</strong> to itself.</p>
<p>Next we explicitly specialize the operands $x$ and $y$ to $a$ and $b$, respectively, in the original <code>substitution</code> axiom (and notice that we must explicitly include the assumption that $a = b$, else the <code>substitution</code> axiom will not apply):</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit._common_</span> <span class="k">import</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
<span class="kn">from</span> <span class="nn">proveit.logic</span> <span class="k">import</span> <span class="n">Equals</span>
<span class="n">a_eq_b</span> <span class="o">=</span> <span class="n">Equals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">operandSubstitution</span> <span class="o">=</span> <span class="n">substitution</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">x</span><span class="p">:</span><span class="n">a</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="n">b</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">a_eq_b</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[52]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="operandSubstitution">operandSubstitution:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/8d8a3084855486e794f4b554588278ace1f481070/expr.html"><img src="__pv_it/8d8a3084855486e794f4b554588278ace1f481070/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/a89a86e29c59ae3a015546dc7d1a6b5ee9e564870/expr.html"><img src="__pv_it/a89a86e29c59ae3a015546dc7d1a6b5ee9e564870/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operandSubstitution</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[53]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1, 2</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/8d8a3084855486e794f4b554588278ace1f481070/expr.html"><img src="__pv_it/8d8a3084855486e794f4b554588278ace1f481070/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/a89a86e29c59ae3a015546dc7d1a6b5ee9e564870/expr.html"><img src="__pv_it/a89a86e29c59ae3a015546dc7d1a6b5ee9e564870/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/4d51ee1e62d011d06d4528b97697bf3da60c9de60/expr.html"><img src="../packages/proveit/__pv_it/4d51ee1e62d011d06d4528b97697bf3da60c9de60/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/4d51ee1e62d011d06d4528b97697bf3da60c9de60/expr.html"><img src="../packages/proveit/__pv_it/4d51ee1e62d011d06d4528b97697bf3da60c9de60/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/07527342713064c87612d00d8557c53d53d5324a0/expr.html"><img src="../packages/proveit/__pv_it/07527342713064c87612d00d8557c53d53d5324a0/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/6840a4fa6c106149dc16a131294d0c5e44f1b0480/expr.html"><img src="../packages/proveit/__pv_it/6840a4fa6c106149dc16a131294d0c5e44f1b0480/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>axiom</td><td></td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style-"text-align:left"><a class="ProveItLink" href="../packages/proveit/logic/equality/_axioms_.html#substitution">proveit.logic.equality.substitution</a></td></tr><tr><td>2</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/8d8a3084855486e794f4b554588278ace1f481070/expr.html"><img src="__pv_it/8d8a3084855486e794f4b554588278ace1f481070/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/8fb8e18e6a4a7fe5a24ad35251804ca6599d89310/expr.html"><img src="__pv_it/8fb8e18e6a4a7fe5a24ad35251804ca6599d89310/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Operation substitution can be done explicitly via a <strong>lambda</strong> expression just as we saw with <em>expression substitution</em>.  The <strong>lambda</strong> expression is not literally substituted in; rather, the function that it represents is applied as the operation.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span> <span class="o">=</span> <span class="n">substitution</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">f</span><span class="p">:</span><span class="n">Lambda</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">))})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[54]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="operationSubstitution">operationSubstitution:</strong> <span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.html"><img src="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[55]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1</td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.html"><img src="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/182d3f256e21dc75ea1ec3168bda49a871e4700a0/expr.html"><img src="../packages/proveit/__pv_it/182d3f256e21dc75ea1ec3168bda49a871e4700a0/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="__pv_it/24e7b55e66b6069db7da0c84c69a02ae3d51ed4d0/expr.html"><img src="__pv_it/24e7b55e66b6069db7da0c84c69a02ae3d51ed4d0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>axiom</td><td></td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style-"text-align:left"><a class="ProveItLink" href="../packages/proveit/logic/equality/_axioms_.html#substitution">proveit.logic.equality.substitution</a></td></tr></table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An alternative way to specify an operation substitution is to map the operation applied to a <strong>variable</strong> (<em>e.g.</em>, the operation $f$ applied to $x$ as $f(x)$) onto an <strong>expression</strong> that uses this same <strong>variable</strong> (<em>e.g.</em>, <code>Add(x, a)</code>).  In the example below, we map $f(x)$ to $x + a$.  This will be internally translated to the same <strong>lambda</strong> expression as before: $x \mapsto x + a$.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit._common_</span> <span class="k">import</span> <span class="n">fx</span>
<span class="n">operationSubstitution2</span> <span class="o">=</span> <span class="n">substitution</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">fx</span><span class="p">:</span><span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">)})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[56]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="operationSubstitution2">operationSubstitution2:</strong> <span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.html"><img src="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The proof is exactly the same as before.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution2</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[57]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1</td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.html"><img src="__pv_it/d56c522ff27a845ef22877e62e18a00a798d49dc0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/182d3f256e21dc75ea1ec3168bda49a871e4700a0/expr.html"><img src="../packages/proveit/__pv_it/182d3f256e21dc75ea1ec3168bda49a871e4700a0/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="__pv_it/24e7b55e66b6069db7da0c84c69a02ae3d51ed4d0/expr.html"><img src="__pv_it/24e7b55e66b6069db7da0c84c69a02ae3d51ed4d0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>axiom</td><td></td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style-"text-align:left"><a class="ProveItLink" href="../packages/proveit/logic/equality/_axioms_.html#substitution">proveit.logic.equality.substitution</a></td></tr></table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Specializing-multiple-levels-simultaneously">Specializing multiple levels simultaneously<a class="anchor-link" href="#Specializing-multiple-levels-simultaneously">&#182;</a></h3><p>When <code>Forall</code> operations are nested, the universal quantifications may be specialized separately.</p>
<p>Consider, for example, the nested quantification expression $\forall_x [\forall_y [\forall_{z|z&lt;(x+y)} P(x, y, z)]]$, defined below:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit._common_</span> <span class="k">import</span> <span class="n">z</span><span class="p">,</span> <span class="n">Pxyz</span>
<span class="kn">from</span> <span class="nn">proveit.number</span> <span class="k">import</span> <span class="n">Less</span><span class="p">,</span> <span class="n">Add</span>
<span class="n">nestedForall</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Forall</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Forall</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">Pxyz</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Less</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))])))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[58]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedForall">nestedForall:</strong> <a class="ProveItLink" href="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.html"><img src="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can successively specialize to reach the inner-most instance-defining variable $z$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[59]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForallSpec1</span> <span class="o">=</span> <span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForall</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[59]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedForallSpec1">nestedForallSpec1:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/5db02201b5957b3a5af018d087bf72c20bd7dcde0/expr.html"><img src="__pv_it/5db02201b5957b3a5af018d087bf72c20bd7dcde0/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[60]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForallSpec2</span> <span class="o">=</span> <span class="n">nestedForallSpec1</span><span class="o">.</span><span class="n">specialize</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[60]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedForallSpec2">nestedForallSpec2:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/2ccb3f5ee4cb39c5e46b57eda9021004fa5806330/expr.html"><img src="__pv_it/2ccb3f5ee4cb39c5e46b57eda9021004fa5806330/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForallSpec3</span> <span class="o">=</span> <span class="n">nestedForallSpec2</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForallSpec2</span><span class="o">.</span><span class="n">conditions</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[61]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedForallSpec3">nestedForallSpec3:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/2e476eaf28b5d852f33ea6185a738b3a43fd334b0/expr.html"><img src="__pv_it/2e476eaf28b5d852f33ea6185a738b3a43fd334b0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.html"><img src="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForallSpec3</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[62]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1, 2</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/2e476eaf28b5d852f33ea6185a738b3a43fd334b0/expr.html"><img src="__pv_it/2e476eaf28b5d852f33ea6185a738b3a43fd334b0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.html"><img src="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.html"><img src="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.html"><img src="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>specialization</td><td>3</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/2ccb3f5ee4cb39c5e46b57eda9021004fa5806330/expr.html"><img src="__pv_it/2ccb3f5ee4cb39c5e46b57eda9021004fa5806330/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>2</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/324679e189885dfe20511ef811703b5a9c67a1410/expr.html"><img src="__pv_it/324679e189885dfe20511ef811703b5a9c67a1410/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/2a6fbf4f956add4cbe4fcb184b76a1ccaec8607d0/expr.html"><img src="__pv_it/2a6fbf4f956add4cbe4fcb184b76a1ccaec8607d0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>3</td><td>specialization</td><td>4</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/5db02201b5957b3a5af018d087bf72c20bd7dcde0/expr.html"><img src="__pv_it/5db02201b5957b3a5af018d087bf72c20bd7dcde0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>4</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.html"><img src="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>But for the sake of convenience and efficiency, <strong>Prove-It</strong> also allows nested <code>Forall</code> operations to be specialized simultaneously:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[63]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">assumptions</span> <span class="o">=</span> <span class="n">ExprList</span><span class="p">(</span><span class="n">nestedForall</span><span class="p">,</span> <span class="n">nestedForallSpec2</span><span class="o">.</span><span class="n">conditions</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">nestedForallSimultaneousSpec</span> <span class="o">=</span> <span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">z</span><span class="p">:</span><span class="n">z</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[63]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedForallSimultaneousSpec">nestedForallSimultaneousSpec:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/1480e526dc0353c6f6ae666885e66a6243bf35ba0/expr.html"><img src="__pv_it/1480e526dc0353c6f6ae666885e66a6243bf35ba0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.html"><img src="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We just need to include an explicit mapping for an inner quantified <strong>variable</strong>.  So we indicated above that we want to map $z$ to $z$, even though this is typically the default, in order to force it to specialize all three <code>Forall</code> operations simultaneously.  The proof is shorter, doing a single all-in-one <em>specialization</em>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForallSimultaneousSpec</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[64]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1, 2</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/1480e526dc0353c6f6ae666885e66a6243bf35ba0/expr.html"><img src="__pv_it/1480e526dc0353c6f6ae666885e66a6243bf35ba0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.html"><img src="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.html"><img src="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.html"><img src="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.html"><img src="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>2</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/324679e189885dfe20511ef811703b5a9c67a1410/expr.html"><img src="__pv_it/324679e189885dfe20511ef811703b5a9c67a1410/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/2a6fbf4f956add4cbe4fcb184b76a1ccaec8607d0/expr.html"><img src="__pv_it/2a6fbf4f956add4cbe4fcb184b76a1ccaec8607d0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Such simultaneous <em>specialization</em> can be done for any number of nested levels.</p>
<p>As a quick aside, it worth noting that the original nested <code>Forall</code> involving the instance variables $x$, $y$, and $z$ could have instead been expressed as $\forall_{x, y, z | z &lt; x + y} P(x, y, z)$, constructed in the following way (also see the section further below on Universal quantification over multiple variables):</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">altNestedForall</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">],</span> <span class="n">Pxyz</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Less</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[65]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="altNestedForall">altNestedForall:</strong> <a class="ProveItLink" href="__pv_it/21ffa6e4b9672476eec218fb9d8ed7bd710784190/expr.html"><img src="__pv_it/21ffa6e4b9672476eec218fb9d8ed7bd710784190/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the <em>meaning</em> of the original <strong>nestedForall</strong> object $\forall_x [\forall_y [\forall_{z|z&lt;x+y} P(x, y, z)]]$ and the meaning of our alternative <strong>altNestedForall</strong> object $\forall_{x, y, z | z &lt; x + y} P(x, y, z)$ are the same:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[66]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">altNestedForall</span> <span class="o">==</span> <span class="n">nestedForall</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[66]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can now accomplish the same specialization as follows:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[67]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">altNestedForallSpec</span> <span class="o">=</span> <span class="n">altNestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">altNestedForall</span><span class="p">,</span> <span class="n">Less</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[67]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="altNestedForallSpec">altNestedForallSpec:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/2bb8a72f7a05d5bd7ff871f294f76da168d8cc770/expr.html"><img src="__pv_it/2bb8a72f7a05d5bd7ff871f294f76da168d8cc770/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.html"><img src="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>with similar proof details:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[68]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">altNestedForallSpec</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[68]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1, 2</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/2bb8a72f7a05d5bd7ff871f294f76da168d8cc770/expr.html"><img src="__pv_it/2bb8a72f7a05d5bd7ff871f294f76da168d8cc770/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.html"><img src="../packages/proveit/__pv_it/df540adc6e8d855f0a63a7c5310d0c98c511d9120/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.html"><img src="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.html"><img src="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/1044354dc1713564cd6733ec84db8a3bc12217920/expr.html"><img src="__pv_it/1044354dc1713564cd6733ec84db8a3bc12217920/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/21ffa6e4b9672476eec218fb9d8ed7bd710784190/expr.html"><img src="__pv_it/21ffa6e4b9672476eec218fb9d8ed7bd710784190/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>2</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/324679e189885dfe20511ef811703b5a9c67a1410/expr.html"><img src="__pv_it/324679e189885dfe20511ef811703b5a9c67a1410/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/2a6fbf4f956add4cbe4fcb184b76a1ccaec8607d0/expr.html"><img src="__pv_it/2a6fbf4f956add4cbe4fcb184b76a1ccaec8607d0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Specializing-and-relabeling-simultaneously">Specializing and relabeling simultaneously<a class="anchor-link" href="#Specializing-and-relabeling-simultaneously">&#182;</a></h3><p>It is also possible to achieve <em>relabeling</em> and <em>specialization</em> (over any number of nested levels) in a single step.</p>
<p>For example, recall our nested <code>Forall</code> object $\forall_x [\forall_y [\forall_{z|z&lt;x+y} P(x, y, z)]]$ from above (explicitly redefined here in case changes were made above):</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[69]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForall</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Forall</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">Forall</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">Pxyz</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Less</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))])))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[69]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedForall">nestedForall:</strong> <a class="ProveItLink" href="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.html"><img src="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can specialize the outermost instance variable $x$ while simultaneously relabeling the instance variable $z$ to $a$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[70]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">relabelMap</span><span class="o">=</span><span class="p">{</span><span class="n">z</span><span class="p">:</span><span class="n">a</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForall</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[70]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/9e6191e8c3a63674f2ebdfe0609b4b290fd206210/expr.html"><img src="__pv_it/9e6191e8c3a63674f2ebdfe0609b4b290fd206210/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Or we can specialize all the way down to the innermost instance variable ($z$) while simultaneously relabeling the instance variable $z$ to $a$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[71]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForallSpecAndRelab</span> <span class="o">=</span> <span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">specializeMap</span><span class="o">=</span><span class="p">{</span><span class="n">y</span><span class="p">:</span><span class="n">y</span><span class="p">},</span> <span class="n">relabelMap</span><span class="o">=</span><span class="p">{</span><span class="n">z</span><span class="p">:</span><span class="n">a</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForall</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[71]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedForallSpecAndRelab">nestedForallSpecAndRelab:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/81f0abedc4068aec9007f4549c970144b5f4eddb0/expr.html"><img src="__pv_it/81f0abedc4068aec9007f4549c970144b5f4eddb0/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In that <code>specialize()</code> command, we used the explicit <code>specializeMap</code> and <code>relabelMap</code> designations to distinguish the two types of mappings, but we could have relied simply on the order of the input arguments instead, with the specialization mapping(s) expected first and the relabel mapping(s) expected second:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[72]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">y</span><span class="p">:</span><span class="n">y</span><span class="p">},</span> <span class="p">{</span><span class="n">z</span><span class="p">:</span><span class="n">a</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForall</span><span class="p">,</span> <span class="n">Less</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[72]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/81f0abedc4068aec9007f4549c970144b5f4eddb0/expr.html"><img src="__pv_it/81f0abedc4068aec9007f4549c970144b5f4eddb0/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can take a quick look at the related proof to see how the specialization and relabeling mappings are indicated:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[73]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForallSpecAndRelab</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[73]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/81f0abedc4068aec9007f4549c970144b5f4eddb0/expr.html"><img src="__pv_it/81f0abedc4068aec9007f4549c970144b5f4eddb0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a>, relabeling <a class="ProveItLink" href="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.html"><img src="../packages/proveit/__pv_it/251502494639118b4892de8e9d720a5fcce840e10/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/07527342713064c87612d00d8557c53d53d5324a0/expr.html"><img src="../packages/proveit/__pv_it/07527342713064c87612d00d8557c53d53d5324a0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.html"><img src="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <em>relabeling</em> map is always shown after the last comma in the mapping under the <em>specialization</em> step.  When any <em>specialization</em> occurs, the "step type" is labeled "specialization".  If there is only <em>relabeling</em>, the "step type" will indicate "relabeling".</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You are not allowed to specify that the same <strong>variable</strong> is to be <em>specialized</em> and <em>relabeled</em>. For example, recall once again our nested <code>Forall</code> object:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[74]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForall</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[74]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<a class="ProveItLink" href="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.html"><img src="__pv_it/595618042814b9d80bd0e44e3ee827cfad89f18a0/expr.png" style="display:inline;vertical-align:middle;" /></a>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can specialize the inner instance variable $y$ to $b$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[75]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">y</span><span class="p">:</span><span class="n">b</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForall</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[75]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.html"><img src="__pv_it/0139db9394546c3e4ae493862c2b3adb8a10ac620/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/fbb48ed876d3d1299aa9c1b1e734ba755e740fd30/expr.html"><img src="__pv_it/fbb48ed876d3d1299aa9c1b1e734ba755e740fd30/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>But we cannot simultaneously specialize $y$ to $b$ <em>and also</em> relabel $y$ with $a$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[76]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">y</span><span class="p">:</span><span class="n">b</span><span class="p">},</span> <span class="p">{</span><span class="n">y</span><span class="p">:</span><span class="n">a</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForall</span><span class="p">])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting a SpecializationFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">SpecializationFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Proof step failed assuming {forall_{x} [forall_{y} [forall_{z | z &lt; (x + y)} P(x , y , z)]]}: Attempting to specialize and relabel the same variable: y
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As noted in the previous tutorial chapter (tutorial04_relabeling), relabeling has another important limitation.  You cannot relabel something using assumptions that involve any of the relabeling variables.  For example, we cannot relabel $P$ to $R$ in <code>nestedForall</code> while assuming <code>nestedForall</code>. (Would be nice to elaborate on this briefly.)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[77]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">RelabelingFailure</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">nestedForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">y</span><span class="p">:</span><span class="n">y</span><span class="p">},</span> <span class="p">{</span><span class="n">P</span><span class="p">:</span><span class="n">R</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">nestedForall</span><span class="p">])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an RelabelingFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">RelabelingFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXPECTED ERROR:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Proof step failed assuming {forall_{x} [forall_{y} [forall_{z | z &lt; (x + y)} P(x , y , z)]]}: Attempting to relabel variable(s) that are free in the assumptions: {P}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Universal-quantification-over-multiple-variables">Universal quantification over multiple variables<a class="anchor-link" href="#Universal-quantification-over-multiple-variables">&#182;</a></h3><p>Rather than nesting <code>Forall</code> operations, you can quantify over multiple instance variables for a more succinct expression. For example, instead of writing $\forall_{x\,\in\ S} [\forall_{y\,\in\, S} P(x, y)]$, you could write $\forall_{x, y\,\in\, S} P(x, y)$, constructed like this:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[78]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">multiVarForall</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">Pxy</span><span class="p">,</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[78]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="multiVarForall">multiVarForall:</strong> <a class="ProveItLink" href="__pv_it/9530f1e62ba5499f562e42a13ac9056cbb8b75200/expr.html"><img src="__pv_it/9530f1e62ba5499f562e42a13ac9056cbb8b75200/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Specialization is still achieved in the same way. Here, for example, we assume the <code>Forall</code> expression along with specific $x$ and $y$ values in set $S$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[79]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">assumptions</span> <span class="o">=</span> <span class="p">[</span><span class="n">multiVarForall</span><span class="p">,</span> <span class="n">InSet</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">S</span><span class="p">),</span> <span class="n">InSet</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">S</span><span class="p">)]</span>
<span class="n">multiVarForallSpec</span> <span class="o">=</span> <span class="n">multiVarForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[79]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="multiVarForallSpec">multiVarForallSpec:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0645c1d25ebe125d442ce68a1083fa3c1f621ba00/expr.html"><img src="__pv_it/0645c1d25ebe125d442ce68a1083fa3c1f621ba00/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.html"><img src="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see how <strong>ProveIt</strong> conceptualizes that specialization by calling its <code>proof()</code> method:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[80]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">multiVarForallSpec</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[80]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1, 2, 3</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/0645c1d25ebe125d442ce68a1083fa3c1f621ba00/expr.html"><img src="__pv_it/0645c1d25ebe125d442ce68a1083fa3c1f621ba00/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.html"><img src="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/507a8cdd7e14c6b5a4f449ae6ee8c02d6d43ddb10/expr.html"><img src="__pv_it/507a8cdd7e14c6b5a4f449ae6ee8c02d6d43ddb10/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/9530f1e62ba5499f562e42a13ac9056cbb8b75200/expr.html"><img src="__pv_it/9530f1e62ba5499f562e42a13ac9056cbb8b75200/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>2</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/98af5737a9597412d38c1dd0437c30eb2330cbe00/expr.html"><img src="__pv_it/98af5737a9597412d38c1dd0437c30eb2330cbe00/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.html"><img src="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>3</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/311805b89cabf2ef63666ab4088164e01061ea790/expr.html"><img src="__pv_it/311805b89cabf2ef63666ab4088164e01061ea790/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/81ec0d05b79ee4039a86d6b039a2bc74013abbb90/expr.html"><img src="__pv_it/81ec0d05b79ee4039a86d6b039a2bc74013abbb90/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that when constructing a <code>Forall</code> object, if you attempt to use the same <strong>variable</strong> multiple times in the list of instance variables, you will get an error:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[81]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">Forall</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="n">Px</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;EXPECTED ERROR:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also specify different domains for each a set of instance <strong>variables</strong>, providing a list (or <code>ExprList</code>) for <code>domains</code> rather than <code>domain</code>.  The display notation will indicate a cartesian product set.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[82]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">multiDomainForall</span> <span class="o">=</span> <span class="n">Forall</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">Pxy</span><span class="p">,</span> <span class="n">domains</span><span class="o">=</span><span class="p">[</span><span class="n">S</span><span class="p">,</span> <span class="n">R</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[82]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="multiDomainForall">multiDomainForall:</strong> <a class="ProveItLink" href="__pv_it/9bb2c5f1413a23c4752d6b6802a91de1405a37f80/expr.html"><img src="__pv_it/9bb2c5f1413a23c4752d6b6802a91de1405a37f80/expr.png" style="display:inline;vertical-align:middle;" /></a><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Internally, however, <strong>ProveIt</strong> simply splits off a condition for each <em>instance variable</em>. Notice lines 6 and 12 in the following <code>exprInfo()</code> details:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[83]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">multiDomainForall</span><span class="o">.</span><span class="n">exprInfo</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[83]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>core type</th><th>sub-expressions</th><th>expression</th></tr>
<tr><td>0</td><td>Operation</td><td>operator:&nbsp;4<br>operand:&nbsp;1<br></td><td><a class="ProveItLink" href="__pv_it/9bb2c5f1413a23c4752d6b6802a91de1405a37f80/expr.html"><img src="__pv_it/9bb2c5f1413a23c4752d6b6802a91de1405a37f80/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>1</td><td>Lambda</td><td>parameter:&nbsp;14<br>body:&nbsp;2<br>conditions:&nbsp;3<br></td><td><a class="ProveItLink" href="__pv_it/7ab492a2556d9374c48c9f1dea90368fab0c27bb0/expr.html"><img src="__pv_it/7ab492a2556d9374c48c9f1dea90368fab0c27bb0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>2</td><td>Operation</td><td>operator:&nbsp;4<br>operand:&nbsp;5<br></td><td><a class="ProveItLink" href="__pv_it/bf91f3dbf8308cad6b8f107b9a464e0304358a360/expr.html"><img src="__pv_it/bf91f3dbf8308cad6b8f107b9a464e0304358a360/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>3</td><td>ExprList</td><td>6</td><td><a class="ProveItLink" href="__pv_it/28143eb1b5ee9102cc0dc6002b43a07ae8e4ddbc0/expr.html"><img src="__pv_it/28143eb1b5ee9102cc0dc6002b43a07ae8e4ddbc0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>4</td><td>Literal</td><td></td><td><a class="ProveItLink" href="../packages/proveit/logic/boolean/quantification/universal/__pv_it/265f8c02ac1094d56e0e6410a1c1fd3500dc9f540/expr.html"><img src="../packages/proveit/logic/boolean/quantification/universal/__pv_it/265f8c02ac1094d56e0e6410a1c1fd3500dc9f540/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>5</td><td>Lambda</td><td>parameter:&nbsp;17<br>body:&nbsp;7<br>conditions:&nbsp;8<br></td><td><a class="ProveItLink" href="__pv_it/e53a4531017e2a88bf5bc8a325c706218876a1e50/expr.html"><img src="__pv_it/e53a4531017e2a88bf5bc8a325c706218876a1e50/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>6</td><td>Operation</td><td>operator:&nbsp;15<br>operands:&nbsp;9<br></td><td><a class="ProveItLink" href="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.html"><img src="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>7</td><td>Operation</td><td>operator:&nbsp;10<br>operands:&nbsp;11<br></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.html"><img src="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>8</td><td>ExprList</td><td>12</td><td><a class="ProveItLink" href="__pv_it/ead6fa6a6bcc94d224481268c03c0eb2ed9435990/expr.html"><img src="__pv_it/ead6fa6a6bcc94d224481268c03c0eb2ed9435990/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>9</td><td>ExprList</td><td>14, 13</td><td><a class="ProveItLink" href="__pv_it/36fdea86647c815a13bd2d80d0c25d06692bc3ac0/expr.html"><img src="__pv_it/36fdea86647c815a13bd2d80d0c25d06692bc3ac0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>10</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.html"><img src="../packages/proveit/__pv_it/6369c6c8083c513ca7161ace249642d040f9327d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>11</td><td>ExprList</td><td>14, 17</td><td><a class="ProveItLink" href="__pv_it/49ffa46c24d385ebbd0014895cf61cc7cb8bd9bb0/expr.html"><img src="__pv_it/49ffa46c24d385ebbd0014895cf61cc7cb8bd9bb0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>12</td><td>Operation</td><td>operator:&nbsp;15<br>operands:&nbsp;16<br></td><td><a class="ProveItLink" href="__pv_it/dafad4e20b325bc824e76db2777fa980b12f309d0/expr.html"><img src="__pv_it/dafad4e20b325bc824e76db2777fa980b12f309d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>13</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.html"><img src="../packages/proveit/__pv_it/abeee18594afe51bfb1be95d9591fbba24ac53f30/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>14</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>15</td><td>Literal</td><td></td><td><a class="ProveItLink" href="../packages/proveit/logic/set_theory/membership/__pv_it/088cbc857536a28d4119ad9639a84270ccb0545d0/expr.html"><img src="../packages/proveit/logic/set_theory/membership/__pv_it/088cbc857536a28d4119ad9639a84270ccb0545d0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>16</td><td>ExprList</td><td>17, 18</td><td><a class="ProveItLink" href="__pv_it/a9f2b84479a5c326e23d93bff2165e49befdd8ef0/expr.html"><img src="__pv_it/a9f2b84479a5c326e23d93bff2165e49befdd8ef0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>17</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
<tr><td>18</td><td>Variable</td><td></td><td><a class="ProveItLink" href="../packages/proveit/__pv_it/e24df48bc297bbcf3538a62f5b4f635a392abfce0/expr.html"><img src="../packages/proveit/__pv_it/e24df48bc297bbcf3538a62f5b4f635a392abfce0/expr.png" style="display:inline;vertical-align:middle;" /></a></td></tr>
</table>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can perform a specialization of $\forall_{(x, y)\,\in\, S \,\times\, R} P(x, y)$ analogous to the previous specialization of $\forall_{x, y\,\in\, S} P(x, y)$, but now specifying distinct set-inclusion assumptions for the variables $x$ and $y$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[84]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">assumptions</span> <span class="o">=</span> <span class="p">[</span><span class="n">multiDomainForall</span><span class="p">,</span> <span class="n">InSet</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">S</span><span class="p">),</span> <span class="n">InSet</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">R</span><span class="p">)]</span>
<span class="n">multiDomainForallSpec</span> <span class="o">=</span> <span class="n">multiDomainForall</span><span class="o">.</span><span class="n">specialize</span><span class="p">(</span><span class="n">assumptions</span><span class="o">=</span><span class="n">assumptions</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[84]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="multiDomainForallSpec">multiDomainForallSpec:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/15bd94b3d60276a6916375c2d6239b822a8e63950/expr.html"><img src="__pv_it/15bd94b3d60276a6916375c2d6239b822a8e63950/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.html"><img src="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[85]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">multiDomainForallSpec</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[85]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>specialization</td><td>1, 2, 3</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/15bd94b3d60276a6916375c2d6239b822a8e63950/expr.html"><img src="__pv_it/15bd94b3d60276a6916375c2d6239b822a8e63950/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.html"><img src="../packages/proveit/__pv_it/4ebbf9cd5f2e78405c64e81897dc9bd29f55abca0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>1</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/cb35b5b00a481d11ae824ee33ac7f336e67d941c0/expr.html"><img src="__pv_it/cb35b5b00a481d11ae824ee33ac7f336e67d941c0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/9bb2c5f1413a23c4752d6b6802a91de1405a37f80/expr.html"><img src="__pv_it/9bb2c5f1413a23c4752d6b6802a91de1405a37f80/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>2</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/98af5737a9597412d38c1dd0437c30eb2330cbe00/expr.html"><img src="__pv_it/98af5737a9597412d38c1dd0437c30eb2330cbe00/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.html"><img src="__pv_it/e2a5d0d2b35dbe8e279c49a9a93d84141b6063d40/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>3</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/45bd47a8a0ce95b6ee6bff63cc0cecd06683889f0/expr.html"><img src="__pv_it/45bd47a8a0ce95b6ee6bff63cc0cecd06683889f0/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/dafad4e20b325bc824e76db2777fa980b12f309d0/expr.html"><img src="__pv_it/dafad4e20b325bc824e76db2777fa980b12f309d0/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Universal quantification over an unspecified number of <strong>variables</strong> via <strong>iterations</strong> will be discussed in the chapter on <a href="tutorial11_advanced_proofs.ipynb">proofs using advanced expressions</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Generalization">Generalization<a class="anchor-link" href="#Generalization">&#182;</a></h1><p><em>Generalization</em> is the "inverse" of <em>specialization</em> just as <em>hypothetical reasoning</em> was the "inverse" of <em>modus ponens</em>.  We can write these derivation rules in a manner that makes this relationship clear (just as we did for <em>hypothetical reasoning</em> and <em>modus ponens</em>):</p>
<p>Specialization: 
$\begin{array}{c}
\boldsymbol{\vdash} \forall_{x \in S~|~Q(x)} P(x) \\
\hline
\left \{\clubsuit \in S,~Q(\clubsuit) \right \} \boldsymbol{\vdash} P(\clubsuit)
\end{array}$</p>
<p>Generalization: 
$\begin{array}{c}
\left \{ x \in S,~Q(x) \right \} \boldsymbol{\vdash} P(x) \\
\hline
\boldsymbol{\vdash} \forall_{x \in S~|~Q(x)} P(x)
\end{array}$</p>
<p>$P(x)$ and $Q(x)$ are intended to represent any function of $x$.
There is some asymmetry between <em>specialization</em> and <em>generalization</em>.  $\clubsuit$ here is meant to represent <em>any</em> <strong>expression</strong>, not necessarily a <strong>variable</strong>, as long is it does not violate scoping restrictions (<em>e.g.</em>, having a free <strong>variable</strong> that is the same as a <strong>lambda</strong> <em>parameter</em> within the $P$ or $Q$ functions).  However, <em>generalization</em> only applies to an unbound <strong>variable</strong>.  In Prove-It, an unbound <strong>variable</strong> is regarded as an "arbitrary" variable.  Essentially, it is implicitly universally quantified.  Recall that <em>modus ponens</em> converts an explicit antecedent to an implicit assumption and <em>hypothetical reasoning</em> does the opposite.  Similarly, <em>specialization</em> converts an explicit universal quantification to implicit arbitrary variables and <em>generalization</em> does the opposite.  The reason for having the explicit and implicit forms is much the same as it was for the antecedent versus assumption.  The explicit form allows nesting but the implicit form provides direct access to the instance expression.  Furthermore, explicit universal quantification offers the power of being able to <em>specialize</em> an instance variable to an arbitrary <strong>expression</strong>.</p>
<p>The above derivation rules are expressed for a single <strong>variable</strong>.  Such rules apply more generally to any number of <strong>variables</strong> (including an unspecified number of <strong>variables</strong> via <strong>iterations</strong> discussed in in the chapter on <a href="tutorial11_advanced_proofs.ipynb">proofs using advanced expressions</a>).</p>
<p>The following examples will start from a <em>specialization</em> instance of the <code>substitution</code> <strong>known truth</strong> visited earlier:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[86]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">substitution</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[86]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span> <span class="o">=</span> <span class="n">substitution</span><span class="o">.</span><span class="n">specialize</span><span class="p">({</span><span class="n">f</span><span class="p">:</span><span class="n">Lambda</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">)),</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="n">y</span><span class="p">},</span> <span class="n">assumptions</span><span class="o">=</span><span class="p">[</span><span class="n">Equals</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[87]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="operationSubstitution">operationSubstitution:</strong> <span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.html"><img src="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/2c97a10aa7f7a70eaba5874c63aa02c18c9ec5630/expr.html"><img src="__pv_it/2c97a10aa7f7a70eaba5874c63aa02c18c9ec5630/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, we try to <em>generalize</em> this <strong>known truth</strong> for all instances of $a$, $x$, and $y$ without any conditions or domain restrictions:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[88]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">proveit</span> <span class="k">import</span> <span class="n">GeneralizationFailure</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting a GeneralizationFailure error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="n">GeneralizationFailure</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;EXPECTED ERROR:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Unable to prove forall_{a, x, y} ((x + a) = (y + a)) assuming {x = y}: Cannot generalize using assumptions that involve any of the new forall variables (except as assumptions are eliminated via conditions or domains)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That <code>generalize()</code> attempt fails because the assumptions of the original <strong>known truth</strong> involve the same <strong>variables</strong> that we are trying to <em>generalize</em> over.  That is not allowed because universal quantification introduces a new scope for $x$ and $y$ (as well as $a$) and the $x=y$ assumption would be external to this scope.  If, however, this assumption is introduced as a condition of the new universal quantification, then we no longer need to retain it as an assumption.  That assumption will be absorbed into the universal quantification conditions.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[89]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">x_eq_y</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[89]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/d97480db95b6b6765dc8f54e7aad92f5b71e9bac0/expr.html"><img src="__pv_it/d97480db95b6b6765dc8f54e7aad92f5b71e9bac0/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Adding additional restrictions, such as a domain and/or other conditions, only makes the statement weaker and is therefore allowed:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[90]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">x_eq_y</span><span class="p">],</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[90]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/3f7d42b4e826a6c2f1fb5e6bbe928f7a5d004c7f0/expr.html"><img src="__pv_it/3f7d42b4e826a6c2f1fb5e6bbe928f7a5d004c7f0/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[91]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">x_eq_y</span><span class="p">,</span> <span class="n">Qx</span><span class="p">],</span> <span class="n">domain</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[91]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/8a53562e2ebdc537bf4dce3a0792d84180345e7b0/expr.html"><img src="__pv_it/8a53562e2ebdc537bf4dce3a0792d84180345e7b0/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is also possible to create multiple levels of nested <code>Forall</code> operations in one step with possibly different domains.  Simply provide a list of lists of <strong>Variable</strong>s as the first argument to <code>generalize</code> and a corresponding list of <code>domains</code>.  The conditions are applied at the outermost level possible (as soon as all of the relevant variables have been introduced) but otherwise retaining the order that the <code>conditions</code> were supplied.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[92]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Qa</span> <span class="o">=</span> <span class="n">Function</span><span class="p">(</span><span class="n">Q</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="n">nestedGenExample</span> <span class="o">=</span> <span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">([[</span><span class="n">a</span><span class="p">],</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]],</span> <span class="n">domainLists</span><span class="o">=</span><span class="p">[[</span><span class="n">P</span><span class="p">],</span> <span class="p">[</span><span class="n">R</span><span class="p">,</span> <span class="n">S</span><span class="p">]],</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">x_eq_y</span><span class="p">,</span> <span class="n">Qx</span><span class="p">,</span> <span class="n">Qa</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[92]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<strong id="nestedGenExample">nestedGenExample:</strong> <span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/419474447dd3f61a1b378795c6c05253be74b9880/expr.html"><img src="__pv_it/419474447dd3f61a1b378795c6c05253be74b9880/expr.png" style="display:inline;vertical-align:middle;" /></a></span><br>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the $Q(a)$ condition was moved to the front even though it was the last supplied condition because it can be applied before the others.  The <em>generalization</em> with multiple leves of nested <code>Forall</code> operations takes one step in the proof:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[93]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nestedGenExample</span><span class="o">.</span><span class="n">proof</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[93]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<table><tr><th>&nbsp;</th><th>step type</th><th>requirements</th><th>statement</th></tr>
<tr><td>0</td><td>generalizaton</td><td>1</td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/419474447dd3f61a1b378795c6c05253be74b9880/expr.html"><img src="__pv_it/419474447dd3f61a1b378795c6c05253be74b9880/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>1</td><td>specialization</td><td>2, 3</td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.html"><img src="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/2c97a10aa7f7a70eaba5874c63aa02c18c9ec5630/expr.html"><img src="__pv_it/2c97a10aa7f7a70eaba5874c63aa02c18c9ec5630/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style="text-align:left"><span style="font-size:20px;"><a class="ProveItLink" href="../packages/proveit/__pv_it/182d3f256e21dc75ea1ec3168bda49a871e4700a0/expr.html"><img src="../packages/proveit/__pv_it/182d3f256e21dc75ea1ec3168bda49a871e4700a0/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="__pv_it/24e7b55e66b6069db7da0c84c69a02ae3d51ed4d0/expr.html"><img src="__pv_it/24e7b55e66b6069db7da0c84c69a02ae3d51ed4d0/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.html"><img src="../packages/proveit/__pv_it/530be409e3083890784cf1d7b28c9e67e90af9360/expr.png" style="display:inline;vertical-align:middle;" /></a>, <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a> : <a class="ProveItLink" href="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.html"><img src="../packages/proveit/__pv_it/f8b9edf8e16034727f0aad55bb83e392c3db40d40/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr><tr><td>2</td><td>axiom</td><td></td><td><span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.html"><img src="../packages/proveit/logic/equality/__pv_it/6ec2193ff7f2a0001aea3e112ec0ee2dddc5beb10/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
<tr><td>&nbsp;</td><td colspan=4 style-"text-align:left"><a class="ProveItLink" href="../packages/proveit/logic/equality/_axioms_.html#substitution">proveit.logic.equality.substitution</a></td></tr><tr><td>3</td><td>assumption</td><td></td><td><span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.html"><img src="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/74ae967be5bd1c096ad29ed9e31ac59a533f07b30/expr.html"><img src="__pv_it/74ae967be5bd1c096ad29ed9e31ac59a533f07b30/expr.png" style="display:inline;vertical-align:middle;" /></a></span></td></tr>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For any level in which multiple instance variables are introduced, a domain can be supplied for each new variable (as above) or one may be specified as the same domain for each of them:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[94]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">([[</span><span class="n">a</span><span class="p">],</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]],</span> <span class="n">domainLists</span><span class="o">=</span><span class="p">[[</span><span class="n">P</span><span class="p">],</span> <span class="p">[</span><span class="n">R</span><span class="p">]],</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">x_eq_y</span><span class="p">,</span> <span class="n">Qx</span><span class="p">,</span> <span class="n">Qa</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[94]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/73e69b5cebec6d19fde07adc16e8ccafb7a60ccf0/expr.html"><img src="__pv_it/73e69b5cebec6d19fde07adc16e8ccafb7a60ccf0/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When <em>generalizing</em> over a single <strong>variable</strong>, the first argument may be just that <strong>variable</strong> rather than a list or tuple:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[95]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Qa</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[95]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<span style="font-size:20px;"><a class="ProveItLink" href="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.html"><img src="__pv_it/f6fa7e29a5b93946fccb5b3fdced1428fc9509210/expr.png" style="display:inline;vertical-align:middle;" /></a> &#x22A2;&nbsp;<a class="ProveItLink" href="__pv_it/5355908becc39bfc1a24002aedc13abdff02ea0a0/expr.html"><img src="__pv_it/5355908becc39bfc1a24002aedc13abdff02ea0a0/expr.png" style="display:inline;vertical-align:middle;" /></a></span>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We may only <em>generalize</em> over <strong>variables</strong> (or <strong>iterations</strong> of <strong>variables</strong>) however:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[96]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">(</span><span class="n">Qx</span><span class="p">,</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Qa</span><span class="p">])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an ValueError error; should not make it to this point&quot;</span>    
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;EXPECTED ERROR:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Must supply &#39;generalize&#39; with a Variable, list of Variables, or list of Variable lists.
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[97]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">operationSubstitution</span><span class="o">.</span><span class="n">generalize</span><span class="p">([[</span><span class="n">a</span><span class="p">],</span> <span class="p">[</span><span class="n">Qx</span><span class="p">]],</span> <span class="n">conditions</span><span class="o">=</span><span class="p">[</span><span class="n">Qa</span><span class="p">])</span>
    <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Expecting an ValueError error; should not make it to this point&quot;</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;EXPECTED ERROR:&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>EXPECTED ERROR: Forall variables of a generalization must be Variable objects
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[98]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">end</span> universal_quantification
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Generalizing</em> an unspecified number of <strong>variables</strong> via an <strong>iteration</strong> will be discussed in the chapter on <a href="tutorial11_advanced_proofs.ipynb">proofs using advanced expressions</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Next-chapter:-Theorem-Proving">Next chapter: <a href="tutorial06_theorem_proving.ipynb">Theorem Proving</a><a class="anchor-link" href="#Next-chapter:-Theorem-Proving">&#182;</a></h1><h2 id="Table-of-Contents"><a href="tutorial00_introduction.ipynb#contents">Table of Contents</a><a class="anchor-link" href="#Table-of-Contents">&#182;</a></h2>
</div>
</div>
</div>
    </div>
  </div>
<footer>
  <p>These web pages were generated on 2019-07-14 by <a href="https://github.com/PyProveIt/Prove-It">Prove-It</a> Beta Version 0.3, licensed under the GNU Public License by Sandia Corporation.</p>
  <p>Presented proofs are not absolutely guaranteed.  For assurance, it is important to check the structure 
  of the statement being proven, independently verify the derivation steps, track dependencies, and ensure that 
  employed axioms are valid and properly structured.  Inconsistencies may exist, unknowingly, in this system.
  </p>
  <p>
  This material is based upon work supported by the U.S. Department of Energy, Office of Science, Office of Advanced Scientific Computing Research, under the Quantum Computing Application Teams program. Sandia National Labs is managed and operated by National Technology and Engineering Solutions of Sandia, LLC, a subsidiary of Honeywell International, Inc., for the U.S. Dept. of Energy's NNSA under contract DE-NA0003525. The views expressed above do not necessarily represent the views of the DOE or the U.S. Government.
  </p>
  <br>
  <p>Please send questions/comments to: <a href="mailto:wwitzel@sandia.gov">
  wwitzel@sandia.gov</a>.</p>
</footer> 
</body>

 


</html>
